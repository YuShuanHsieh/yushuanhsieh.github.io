<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A technical blog about software engineering, system design, and modern development practices."><meta name=author content="Cherie Hsieh"><title>JavaScript - Pass Params Into Functions — Cherie's Tech Blog</title><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><link rel=stylesheet href="/css/style.css?v=1771486583"></head><body><header class=site-header><div class=header-inner><a href=https://yushuanhsieh.github.io/ class=site-logo><span class=logo-icon>⟨/⟩</span>
<span class=logo-text>Cherie's Tech Blog</span></a><nav class=site-nav><a href=/ class=nav-link>Home</a>
<a href=/posts/ class=nav-link>Posts</a>
<a href=/categories/ class=nav-link>Categories</a>
<a href=/about/ class=nav-link>About</a></nav><button class=mobile-menu-toggle aria-label="Toggle menu">
<span></span>
<span></span>
<span></span></button></div></header><main class=site-main><article class=single-post><header class=post-header><h1 class=post-title>JavaScript - Pass Params Into Functions</h1><div class=post-meta><time datetime=2018-05-07>May 7, 2018</time>
<span class=separator>·</span>
<span class=reading-time>5 min read</span></div><div class=post-categories><a href=https://yushuanhsieh.github.io/categories/web/>Web</a></div></header><div class=post-content><h2 id=前言>前言</h2><p>這篇文章起源於我為了瞭解瀏覽器的運作原理，以利針對瀏覽器進行效能優化時，所延伸出來的基礎文章。剛開始學習切入點是 Chrome 的 V8 JavaScript Engine，看到有一位作者仔細地說明 V8 Engine 如何 Compile JavaScript 的流程，進而引發我對 JavaScript Memory Allocation 的興趣。此外，剛好最近也在用 TypeScript 寫類 static type object，所以想更清楚知道使用 TypeScript 這個 pre-processor，在瀏覽器中會怎樣提高 JavaScript Compile 的性能。</p><p>以下內容會使用 <code>ECMA-262</code> 的標準來做探討。</p><h2 id=call-by-value--call-by-sharing>Call by value & Call by sharing</h2><p>在 <code>ECMA-262</code>的實作規範中，JavaScript 主要採用 <code>Call by sharing</code> 和 <code>Call by value</code> 的方式來傳遞參數。</p><ul><li><code>Primitive Value</code> 使用 Call by value。</li><li><code>Object</code> 則是使用 Call by sharing。又或者你可以說是 Call by value，只是這個 value 是 memory address 而已。</li></ul><p>在這部分，JavaScript 的開發者 <em>Brendan Eich</em> 也有提及：</p><blockquote><p>Brendan Eich: There is no copy of any object data. The only thing that&rsquo;s copied is a <em>reference</em> (a safe pointer, if you will) that uniquely addresses the object.</p></blockquote><p>而 JavaScript 的 <code>Primitive Value</code> 包含六種 Type：</p><ul><li>string</li><li>number</li><li>boolean</li><li>null</li><li>undefined</li><li>symbol (ECMAScript 2015)</li></ul><p>因此，當你想要引入參數時，以上 Type 都可以直接在 function 內修改，而不會影響到原有的 variable。</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#cf222e>let</span> <span style=color:#1f2328>student</span> <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#39;Cherie&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#57606a>// variable student is a string(Primitive Value), so it is passed by value
</span></span></span><span style=display:flex><span><span style=color:#cf222e>function</span> <span style=color:#1f2328>changeName</span><span style=color:#1f2328>(</span><span style=color:#1f2328>name</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>name</span> <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#39;Cherry&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>changeName</span><span style=color:#1f2328>(</span><span style=color:#1f2328>student</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>console</span><span style=color:#1f2328>.</span><span style=color:#1f2328>log</span><span style=color:#1f2328>(</span><span style=color:#1f2328>student</span><span style=color:#1f2328>);</span> <span style=color:#57606a>//Output is `Cherie`
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#cf222e>let</span> <span style=color:#1f2328>student</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>{</span><span style=color:#1f2328>name</span><span style=color:#0550ae>:</span> <span style=color:#0a3069>&#39;Cherie&#39;</span><span style=color:#1f2328>};</span>
</span></span><span style=display:flex><span><span style=color:#57606a>// By contrast, variable student is an object, 
</span></span></span><span style=display:flex><span><span style=color:#57606a>// so it is passed by value with memory address(sharing)
</span></span></span><span style=display:flex><span><span style=color:#cf222e>function</span> <span style=color:#1f2328>changeName</span><span style=color:#1f2328>(</span><span style=color:#1f2328>student</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>student</span><span style=color:#1f2328>.</span><span style=color:#1f2328>name</span> <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#39;Cherry&#39;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>changeName</span><span style=color:#1f2328>(</span><span style=color:#1f2328>student</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>console</span><span style=color:#1f2328>.</span><span style=color:#1f2328>log</span><span style=color:#1f2328>(</span><span style=color:#1f2328>student</span><span style=color:#1f2328>.</span><span style=color:#1f2328>name</span><span style=color:#1f2328>);</span> <span style=color:#57606a>//Output is `Cherry`
</span></span></span></code></pre></td></tr></table></div></div><h2 id=the-difference-of-call-by-value--reference--sharing>The Difference of Call by Value / Reference / Sharing</h2><p>如果是 C/C++ 背景的人，對於 Call by value 和 Call by reference 的差異一定很清楚。查找網路文章，會發現有些人會覺得 JavaScript 的 object 是 call by reference，但其實這還是有些許差異。</p><h3 id=create-copied-variables---call-by-value--call-by-sharing>Create Copied Variables - Call by Value / Call by Sharing</h3><p>Call by value 或是 Call by sharing，在傳遞參數的時候，都會<strong>新建</strong>一個 variable，然後<strong>複製</strong>其值。所以，無論如何他都需要有新的記憶體空間。理論上，在處理不當導致系統來不及回收下，有可能因為 variable 數量龐大而造成 memory leak。</p><h3 id=use-referenceaddress-without-copy-action---call-by-reference>Use reference(address) without copy action - Call by Reference</h3><p>Call by reference 則是會直接使用 variable 的 reference (memory address) 來取得 object，在傳遞參數過程中並<strong>不會產生</strong>一個新變數並且進行複製行為。</p><h2 id=immutable-data>Immutable Data?</h2><p>程式開發過程中，很常需要傳遞 variable 但不影響原有 variable 的情況發生。在 JavaScript 傳遞 object 是透過 Call by sharing 的方式之下，修改 variable 內的 property 都會影響到原有的 variable。這也意味著在 JavaScript 中，如果想要實現 Immutable Data 而 variable 又是 object type，理論上需要複製 object 結構內的所有 property 才有可能達成。</p><p>當然現在有很多 libs 可以在提升效能的前提之下完成這類的 deep copy (意指在記憶體空間中新建一個和原有 object 一樣 size 的 object，而不會只有複製其 memory address)，不過上述所提供的概念，可以讓新手更清楚地掌握 JavaScript 的記憶體運用。</p><h2 id=結論>結論</h2><p>JavaScript 和 Java ㄧ樣，都是採用 <code>Call by Sharing</code> 的方式在傳遞 variable。也因此在使用 function 處理 variable 的時候，要注意避免在 function 內直接修改 variable。如果希望修改 variable 的值，又希望只在 function 內有效，那就請 deep copy 此 variable，然後再進行修改。</p></div><footer class=post-footer><div class=post-nav><a href=https://yushuanhsieh.github.io/posts/2018-01-29-cypress-basic-usage/ class="post-nav-link prev"><span class=label>← Previous</span>
<span class=title>Cypress & Cucumber Introduction</span>
</a><a href=https://yushuanhsieh.github.io/posts/2018-05-15-javascript-optimization-elements/ class="post-nav-link next"><span class=label>Next →</span>
<span class=title>How Does JavaScript Engine (V8) Optimize JavaScript code - Elements</span></a></div></footer></article></main><footer class=site-footer><div class=footer-inner><p class=footer-copyright>&copy; 2026 Cherie's Tech Blog. All rights reserved.</p><p class=footer-powered>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a></p></div></footer></body></html>