<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A technical blog about software engineering, system design, and modern development practices."><meta name=author content="Cherie Hsieh"><title>How Does JavaScript Engine (V8) Optimize JavaScript code - Elements — Cherie's Tech Blog</title><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><link rel=stylesheet href="/css/style.css?v=1771486583"></head><body><header class=site-header><div class=header-inner><a href=https://yushuanhsieh.github.io/ class=site-logo><span class=logo-icon>⟨/⟩</span>
<span class=logo-text>Cherie's Tech Blog</span></a><nav class=site-nav><a href=/ class=nav-link>Home</a>
<a href=/posts/ class=nav-link>Posts</a>
<a href=/categories/ class=nav-link>Categories</a>
<a href=/about/ class=nav-link>About</a></nav><button class=mobile-menu-toggle aria-label="Toggle menu">
<span></span>
<span></span>
<span></span></button></div></header><main class=site-main><article class=single-post><header class=post-header><h1 class=post-title>How Does JavaScript Engine (V8) Optimize JavaScript code - Elements</h1><div class=post-meta><time datetime=2018-05-15>May 15, 2018</time>
<span class=separator>·</span>
<span class=reading-time>6 min read</span></div><div class=post-categories><a href=https://yushuanhsieh.github.io/categories/web/>Web</a></div></header><div class=post-content><h1 id=前言>前言</h1><p>JavaScript 是種弱型態語言，而 JavaScript Engine (V8) 透過對於 JavaScript object 的型態強化來提升 JavaScript 執行效率。</p><h1 id=elements-kinds-in-v8>Elements Kinds in V8</h1><h2 id=what-is-elements>What is <code>Elements</code></h2><p>JavaScript 的 object 可以有任意個 property，而這些 property 的命名又可以是任意字元，例如：</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#cf222e>const</span> <span style=color:#1f2328>student</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>id</span><span style=color:#0550ae>:</span> <span style=color:#0550ae>1234</span><span style=color:#1f2328>,</span> <span style=color:#57606a>// property name is a string
</span></span></span><span style=display:flex><span>  <span style=color:#0550ae>1</span><span style=color:#0550ae>:</span> <span style=color:#0550ae>2</span> <span style=color:#57606a>// property name is an integer
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><p>在 V8 引擎中，將這些整數命名(integer names)的 property 稱為 <code>Elements</code>。其中最常見的就是透過 JavaScript Array contructor 所產生 object 的 property。</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#cf222e>const</span> <span style=color:#1f2328>array</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0a3069>&#39;name1&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;name2&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;name3&#39;</span><span style=color:#1f2328>];</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>array</span><span style=color:#1f2328>[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#39;name1&#39;</span><span style=color:#1f2328>;</span> <span style=color:#57606a>// 0 為 array 的 property name
</span></span></span></code></pre></td></tr></table></div></div><h2 id=根據-elements-的種類elements-kinds來進行效能提升>根據 Elements 的種類(Elements Kinds)來進行效能提升</h2><p>當 V8 引擎在對 Array object 進行操作時（例如使用 Array 的 methods: map/foreach），會根據 Array 內的 Elements 種類來做優化。</p><p>以下為幾個 V8 引擎內常用的 Elements：
<img src=https://4.bp.blogspot.com/-cfidBaKZWSA/WbfpMkT1J0I/AAAAAAAAAao/fBZ72vuw_QcRhAboyILZdoA6ir48ZupjACLcBGAs/s1600/lattice.png alt="Elements Kinds in V8"></p><p>可以由命名來看出 Elements 的種類由特定類型 (specific types) 到通用類型 (generic types)。例如：<code>PACKED_SMI_ELEMENTS</code> 就是指範圍較小的 Integer，而 <code>PACKED_DOUBLE_ELEMENTS</code> 則是涵蓋 Interger 及其小數，如此地一層層降階下來。</p><p>當 Array object 在創建時，引擎會標記此 Array object 的 elements kinds，舉例如下：</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#cf222e>const</span> <span style=color:#1f2328>smiArray</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span><span style=color:#0550ae>2</span><span style=color:#1f2328>,</span><span style=color:#0550ae>3</span><span style=color:#1f2328>];</span> <span style=color:#57606a>//PACKED_SMI_ELEMENTS
</span></span></span><span style=display:flex><span><span style=color:#cf222e>const</span> <span style=color:#1f2328>doubleArray</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>1.0</span><span style=color:#1f2328>,</span><span style=color:#0550ae>2.0</span><span style=color:#1f2328>,</span><span style=color:#0550ae>3.2</span><span style=color:#1f2328>];</span> <span style=color:#57606a>//PACKED_DOUBLE_ELEMENTS
</span></span></span><span style=display:flex><span><span style=color:#cf222e>const</span> <span style=color:#1f2328>array</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0a3069>&#39;name1&#39;</span><span style=color:#1f2328>,</span><span style=color:#0a3069>&#39;name2&#39;</span><span style=color:#1f2328>,</span><span style=color:#0a3069>&#39;name3&#39;</span><span style=color:#1f2328>];</span> <span style=color:#57606a>//PACKED_ELEMENTS
</span></span></span></code></pre></td></tr></table></div></div><p>針對不同 Elements 種類，引擎會採取不同優化策略，像是<code>PACKED_SMI_ELEMENTS</code> 標明 Array 中僅含整數，所以在V8 引擎內部在處理此種類時，自然比 <code>PACKED_DOUBLE_ELEMENTS</code> 來的快速。相同地，<code>PACKED_DOUBLE_ELEMENTS</code>又比 <code>PACKED_ELEMENTS</code> 好些。</p><h2 id=elements-kinds-的變動>Elements kinds 的變動</h2><p>變動 Array object 的 property value，則 Elements Kinds 也會隨之改變。例如：</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#cf222e>let</span> <span style=color:#1f2328>array</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span><span style=color:#0550ae>2</span><span style=color:#1f2328>,</span><span style=color:#0550ae>3</span><span style=color:#1f2328>];</span> <span style=color:#57606a>//PACKED_SMI_ELEMENTS
</span></span></span></code></pre></td></tr></table></div></div><p>如果在此 array 中插入一個 float 值，則此 array 的 elements kinds 會從原先的 <code>PACKED_SMI_ELEMENTS</code> 變成 <code>PACKED_DOUBLE_ELEMENTS</code></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#1f2328>array</span><span style=color:#1f2328>.</span><span style=color:#1f2328>push</span><span style=color:#1f2328>(</span><span style=color:#0550ae>0.5</span><span style=color:#1f2328>);</span> <span style=color:#57606a>// 0.5 is not an integer, so the elements kinds transit to PACKED_DOUBLE_ELEMENTS
</span></span></span></code></pre></td></tr></table></div></div><p>要注意的地方是，elements kinds 只能從 <strong>specific 降轉到 generic</strong>，無法再從 generic 轉回 specific。例如前面例子提到：</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#cf222e>let</span> <span style=color:#1f2328>array</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span><span style=color:#0550ae>2</span><span style=color:#1f2328>,</span><span style=color:#0550ae>3</span><span style=color:#1f2328>];</span> <span style=color:#57606a>//PACKED_SMI_ELEMENTS
</span></span></span><span style=display:flex><span><span style=color:#1f2328>array</span><span style=color:#1f2328>.</span><span style=color:#1f2328>push</span><span style=color:#1f2328>(</span><span style=color:#0550ae>0.5</span><span style=color:#1f2328>);</span> <span style=color:#57606a>//PACKED_DOUBLE_ELEMENTS
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#1f2328>array</span><span style=color:#1f2328>[</span><span style=color:#0550ae>3</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0550ae>4</span><span style=color:#1f2328>;</span> <span style=color:#57606a>//Still PACKED_DOUBLE_ELEMENTS, Cannot be back to PACKED_SMI_ELEMENTS
</span></span></span></code></pre></td></tr></table></div></div><h2 id=holey-elements-slower-than-packed-elements>HOLEY Elements (slower than PACKED Elements)</h2><p>而上圖中常見的 Elements 可以看到分成 <code>PACKED</code> <code>HOLEY</code> 兩個項目。</p><ul><li>PACKED: 指在 Array object 中，所有 element 都有其對應 value。</li><li>HOLEY: 指在 Array object 中，有部分 element 沒有對應的 value。</li></ul><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#57606a>// PACKED Elements
</span></span></span><span style=display:flex><span><span style=color:#cf222e>const</span> <span style=color:#1f2328>array</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span><span style=color:#0550ae>2</span><span style=color:#1f2328>,</span><span style=color:#0550ae>3</span><span style=color:#1f2328>,</span><span style=color:#0550ae>4</span><span style=color:#1f2328>];</span> <span style=color:#57606a>// 每個 array 內的 elements 都有對應的值
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>// HOLEY Elements
</span></span></span><span style=display:flex><span><span style=color:#cf222e>let</span> <span style=color:#1f2328>array</span> <span style=color:#0550ae>=</span> <span style=color:#cf222e>new</span> <span style=color:#6639ba>Array</span><span style=color:#1f2328>(</span><span style=color:#0550ae>3</span><span style=color:#1f2328>);</span> <span style=color:#57606a>// 宣告了3個 element 的 Array object，但是其 element 卻沒有對應的值。
</span></span></span></code></pre></td></tr></table></div></div><p>之所以會這樣區分，是因為當 Array object 中有空缺的值時，那引擎在執行時需要額外的判斷，<strong>進而導致效能較低</strong>。</p><p>另一個會產生 HOLEY Elements 的例子：</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#cf222e>let</span> <span style=color:#1f2328>array</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span><span style=color:#0550ae>2</span><span style=color:#1f2328>,</span><span style=color:#0550ae>3</span><span style=color:#1f2328>];</span> <span style=color:#57606a>// 宣告了一個三個 element 的 Array object
</span></span></span><span style=display:flex><span><span style=color:#1f2328>array</span><span style=color:#1f2328>[</span><span style=color:#0550ae>5</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0550ae>6</span><span style=color:#1f2328>;</span> <span style=color:#57606a>// 宣告 Array indexed property 5 的值為 6
</span></span></span></code></pre></td></tr></table></div></div><p>由於 Array 的 property (index) 具有連續性，所以當宣告 <code>array[5] = 6;</code> 時，引擎會自動將 Array 的長度由 3 擴展到 5，也因此造成 array[3] 和 array[4] 會沒有對應值的情況發生。</p><h3 id=holey-elements-kinds-無法再轉換成-packed-elements-kinds>HOLEY Elements kinds 無法再轉換成 PACKED Elements kinds</h3><p>如同上面有提到，Elements kinds 只能降階，所以當引擎判定某個 Array object 為 HOLEY Elements kinds 時，即使後續將每個 Array 內 element 都配置好對應的值，還是無法改變成 PACKED Elements kinds，進而影響引擎處理的效能。</p><h2 id=the-tips-of-optimization>The Tips of Optimization</h2><ol><li>Array object 內的 element 值盡量統一類型。例如都是 Integer 或是 string，避免 Elements Kinds 的轉換。</li><li>避免讓 Array object 產生空缺，造成 HOLEY Elements。例如不要使用 new Array，盡量不要使用 Array index 來直接插入值。</li><li>在處理 Array object 時，使用 <code>for of</code> <code>foreach</code> 等方式。</li><li>使用 Array 來產生 array object，而不是自己產生 array-like 的 object，以便讓引擎可以根據 Array prototype 的 methods 來進行效能提升。</li></ol><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#57606a>// Array 是一個 property name 為 indexed number 的 object，所以所謂的 Array-like object 就是：
</span></span></span><span style=display:flex><span><span style=color:#cf222e>const</span> <span style=color:#1f2328>array</span> <span style=color:#0550ae>=</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#0550ae>1</span><span style=color:#0550ae>:</span> <span style=color:#0a3069>&#39;name1&#39;</span><span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>  <span style=color:#0550ae>2</span><span style=color:#0550ae>:</span> <span style=color:#0a3069>&#39;name2&#39;</span><span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>  <span style=color:#0550ae>3</span><span style=color:#0550ae>:</span> <span style=color:#0a3069>&#39;name3&#39;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=reference>Reference</h1><ol><li><a href=https://v8project.blogspot.tw/2017/09/elements-kinds-in-v8.html>https://v8project.blogspot.tw/2017/09/elements-kinds-in-v8.html</a></li><li><a href="https://www.youtube.com/watch?v=EhpmNyR2Za0">https://www.youtube.com/watch?v=EhpmNyR2Za0</a></li></ol></div><footer class=post-footer><div class=post-nav><a href=https://yushuanhsieh.github.io/posts/2018-05-07-javascript-basic-concept/ class="post-nav-link prev"><span class=label>← Previous</span>
<span class=title>JavaScript - Pass Params Into Functions</span>
</a><a href=https://yushuanhsieh.github.io/posts/2018-05-16-javascript-optimization-property/ class="post-nav-link next"><span class=label>Next →</span>
<span class=title>How Does JavaScript Engine (V8) Optimize JavaScript code - Fast Property Access</span></a></div></footer></article></main><footer class=site-footer><div class=footer-inner><p class=footer-copyright>&copy; 2026 Cherie's Tech Blog. All rights reserved.</p><p class=footer-powered>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a></p></div></footer></body></html>