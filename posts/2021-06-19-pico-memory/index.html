<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A technical blog about software engineering, system design, and modern development practices."><meta name=author content="Cherie Hsieh"><title>Boot Flow of Raspberry Pi Pico — Cherie's Tech Blog</title><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><link rel=stylesheet href="/css/style.css?v=1771486583"></head><body><header class=site-header><div class=header-inner><a href=https://yushuanhsieh.github.io/ class=site-logo><span class=logo-icon>⟨/⟩</span>
<span class=logo-text>Cherie's Tech Blog</span></a><nav class=site-nav><a href=/ class=nav-link>Home</a>
<a href=/posts/ class=nav-link>Posts</a>
<a href=/categories/ class=nav-link>Categories</a>
<a href=/about/ class=nav-link>About</a></nav><button class=mobile-menu-toggle aria-label="Toggle menu">
<span></span>
<span></span>
<span></span></button></div></header><main class=site-main><article class=single-post><header class=post-header><h1 class=post-title>Boot Flow of Raspberry Pi Pico</h1><div class=post-meta><time datetime=2021-06-30>June 30, 2021</time>
<span class=separator>·</span>
<span class=reading-time>7 min read</span></div><div class=post-categories><a href=https://yushuanhsieh.github.io/categories/raspberry-pi/>Raspberry-Pi</a></div></header><div class=post-content><p>之前 blog 文章有提到 <a href=https://yushuanhsieh.github.io/post/2021-05-23-lab4-multiprocessor/>JOS 作業系統初始化流程</a>，包含 x86_64 架構下 muticore 喚醒過程等。而剛好前陣子入手採用 ARM Cortex-M0+ CPU 的 Raspberry Pi Pico 開發板，因此就研究了一下 Raspberry Pi 為 Pico 開發板所撰寫的 bootrom、memory map 和 layout 等。</p><p><em>（以下的 boot flow 是指開發板上電後，硬體完成 hardware controlled boot sequence ，從 processor controlled boot sequence 開始，更多說明可以參考 <a href=https://datasheets.raspberrypi.org/rp2040/rp2040-datasheet.pdf>datasheet:2.7. Boot Sequence</a>）</em></p><h2 id=boot-sequence>Boot Sequence</h2><p><a href=https://github.com/raspberrypi/pico-bootrom>pico-bootrom</a> 是 Raspberry Pi Pico 在出廠時燒在 ROM 上的 boot 程式，大小為 16 KB，它最主要目的在於提供 processor 初始化行為和提供不同的 boot mode 切換。</p><h3 id=boot-flow-diagram>Boot Flow Diagram</h3><p><img src=/posts/pico-boot-flow.png alt></p><h3 id=memory-map--memory-layout>Memory Map & Memory Layout</h3><p><img src=/posts/Raspi-pico.png alt></p><p>參考 datasheet 所提供的 flow diagram，以及根據 source code 所整理的 memory map，搭配 source code 來分析 boot 和 application 執行流程。</p><p>Raspberry Pi Pico 有兩個 processor，一開始兩個 processor 都會去讀取位於 <code>0x00000000</code> ROM 的起始位置以取得 <a href=https://developer.arm.com/documentation/dui0497/a/the-cortex-m0-processor/exception-model/vector-table>vector table</a>。vector table 有兩個重要資訊：<strong>initial stack pointer (MSP)</strong> 和 <strong>reset handler</strong>，在 bootrom.ld 可以看到 MSP 被設置在 SRAM address end - 256 bytes 的位置。</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#57606a>/* Leave room above the stack for stage 2 load, so that stage 2
</span></span></span><span style=display:flex><span><span style=color:#57606a>       can image SRAM from its beginning */</span>
</span></span><span style=display:flex><span>    _stacktop <span style=color:#0550ae>=</span> <span style=color:#6639ba>ORIGIN</span><span style=color:#1f2328>(</span>SRAM<span style=color:#1f2328>)</span> <span style=color:#0550ae>+</span> <span style=color:#6639ba>LENGTH</span><span style=color:#1f2328>(</span>SRAM<span style=color:#1f2328>)</span> <span style=color:#0550ae>-</span> <span style=color:#0550ae>256</span><span style=color:#1f2328>;</span>
</span></span></code></pre></td></tr></table></div></div><p>再看 bootrom_rt0.S 找到 vector table 的內容：</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#57606a>// bootrom_rt0.S
</span></span></span><span style=display:flex><span><span style=color:#1f2328>.</span>cpu cortex<span style=color:#0550ae>-</span>m0
</span></span><span style=display:flex><span><span style=color:#1f2328>.</span>thumb
</span></span><span style=display:flex><span><span style=color:#1f2328>.</span>section <span style=color:#1f2328>.</span>vectors
</span></span><span style=display:flex><span><span style=color:#1f2328>.</span>balign <span style=color:#0550ae>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#1f2328>.</span>global __vectors
</span></span><span style=display:flex><span><span style=color:#900;font-weight:700>__vectors</span><span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>.</span>word _stacktop <span style=color:#57606a>// MSP
</span></span></span><span style=display:flex><span><span style=color:#1f2328>.</span>word _start    <span style=color:#57606a>// Reset
</span></span></span><span style=display:flex><span><span style=color:#1f2328>.</span>word _nmi      <span style=color:#57606a>// NMI
</span></span></span><span style=display:flex><span><span style=color:#1f2328>.</span>word _dead     <span style=color:#57606a>// HardFault
</span></span></span></code></pre></td></tr></table></div></div><p>processor 會設置 stack pointer，並且執行在 reset handler address 的 entry point <code>_start</code>。</p><p>而在 boot 階段，由於僅能使用一個 processor 來完成啟動流程，因此會先判斷當前執行的 processor 是 CPU-0 還是 CPU-1：</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#900;font-weight:700>check_core</span><span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    ldr r0<span style=color:#1f2328>,</span> <span style=color:#0550ae>=</span>SIO_BASE <span style=color:#57606a>// SIO_BASE (Single-cycle IO block) see. 2.3.1. SIO
</span></span></span><span style=display:flex><span>    ldr r1<span style=color:#1f2328>,</span> <span style=color:#1f2328>[</span>r0<span style=color:#1f2328>,</span> <span style=color:#f6f8fa;background-color:#82071e>#</span>SIO_CPUID_OFFSET<span style=color:#1f2328>]</span>
</span></span><span style=display:flex><span>    cmp r1<span style=color:#1f2328>,</span> <span style=color:#f6f8fa;background-color:#82071e>#</span><span style=color:#0550ae>0</span>
</span></span><span style=display:flex><span>    bne wait_for_vector
</span></span><span style=display:flex><span>    bl _nmi
</span></span></code></pre></td></tr></table></div></div><p>bootrom 是透過讀取 <code>SIO_BASE + SIO_CPUID_OFFSET</code> SIO CPUID register (<a href=https://datasheets.raspberrypi.org/rp2040/rp2040-datasheet.pdf>2.3.1.7. List of Registers</a>) 的值來判斷當前 processor 編號，如果是 1 的話則將此 processor 直接切換成 sleep 模式。</p><p>接下來，檢查 Rescue DP flag 和 watchdog register 是否有設置，如有設置的話則需進行額外處理。由於使用者在正常流程中比較少會需要處理這兩個狀況，因此就省略不說，詳細內容可以參考 <a href=https://datasheets.raspberrypi.org/rp2040/rp2040-datasheet.pdf>2.3.4.2. Rescue DP</a>、<a href=https://datasheets.raspberrypi.org/rp2040/rp2040-datasheet.pdf>2.8.1.1. Watchdog Boot</a>。</p><p>最後就是選擇進入 flash boot 或是 USB device boot。flash boot 讓開發板正常執行已放在 flash 的使用者程式；而如果要將程式透過 USB massive storage 模式放入到 flash，則是 USB device boot。</p><p>選擇的方式是透過讀取 flash(QSPI interface) CS(Chip Select) pin 的電位，如果高電位是 flash boot ，反之低電位是 USB device boot。在 Raspberry Pi Pico 開發板上可以看到一個 <code>BOOTSEL</code> 按鈕，用來控制 flash CS pin 的電位，因此當使用者按下按鈕不放時，此時 flash CS pin 為 0，進入 USB device boot 模式。</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#cf222e>uint32_t</span> sum <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>for</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span> i <span style=color:#0550ae>=</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>;</span> i <span style=color:#0550ae>&lt;</span> <span style=color:#0550ae>9</span><span style=color:#1f2328>;</span> <span style=color:#0550ae>++</span>i<span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>  <span style=color:#6639ba>delay</span><span style=color:#1f2328>(</span><span style=color:#0550ae>1</span> <span style=color:#0550ae>*</span> ROSC_MHZ_MAX <span style=color:#0550ae>/</span> <span style=color:#0550ae>3</span><span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  sum <span style=color:#0550ae>+=</span> <span style=color:#1f2328>(</span>sio_hw<span style=color:#0550ae>-&gt;</span>gpio_hi_in <span style=color:#0550ae>&gt;&gt;</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>&amp;</span> <span style=color:#0550ae>1u</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>if</span> <span style=color:#1f2328>(</span>sum <span style=color:#0550ae>&gt;=</span> <span style=color:#0550ae>5</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  <span style=color:#6639ba>_flash_boot</span><span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>// note this never returns (and is marked as such)
</span></span></span><span style=display:flex><span><span style=color:#6639ba>_usb_boot</span><span style=color:#1f2328>(</span><span style=color:#0550ae>0</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>);</span>
</span></span></code></pre></td></tr></table></div></div><p>為了確保資料讀取的正確性，會連續讀取 flash CS pin 數次，再根據 sum 決定最後電位值是 1 或是 0。</p><p>這邊要注意的是，當跳轉至 <code>_flash_boot</code>，是不會再跳轉回來並且繼續執行 <code>_usb_boot</code>，其原因在於：</p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#cf222e>static</span> <span style=color:#cf222e>void</span> <span style=color:#6639ba>_flash_boot</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#57606a>// more code ...
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#cf222e>asm</span> <span style=color:#cf222e>volatile</span> <span style=color:#1f2328>(</span>
</span></span><span style=display:flex><span>  <span style=color:#0a3069>&#34;add %0, #1</span><span style=color:#0a3069>\n</span><span style=color:#0a3069>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#0a3069>&#34;mov lr, %1</span><span style=color:#0a3069>\n</span><span style=color:#0a3069>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#0a3069>&#34;bx %0</span><span style=color:#0a3069>\n</span><span style=color:#0a3069>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#0550ae>:</span> <span style=color:#0a3069>&#34;+r&#34;</span> <span style=color:#1f2328>(</span>boot2_entry<span style=color:#1f2328>)</span> <span style=color:#0550ae>:</span> <span style=color:#0a3069>&#34;l&#34;</span> <span style=color:#1f2328>(</span>boot2_exit<span style=color:#1f2328>)</span> <span style=color:#0550ae>:</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>);</span>
</span></span><span style=display:flex><span>  <span style=color:#6639ba>__builtin_unreachable</span><span style=color:#1f2328>();</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><p>在 asm code 中執行 bx instruction 跳轉至 boot 2 entry point，意味著無透過 link register 儲存當前 PC。</p><blockquote><ol><li><p><strong>BX</strong> Branch and exchange instruction set. (<a href=https://developer.arm.com/documentation/ddi0484/b/CHDCICDF>source</a>)</p></li><li><p><code>__builtin_unreachable()</code> the built-in function is useful in situations where the compiler cannot deduce the unreachability of the code.(<a href=https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html>read more</a>)</p></li></ol></blockquote><p>另外要注意的 asm code 中： <code>"add %0, #1\n"</code>，之所以會 +1 的原因是：</p><blockquote><p>For BX and BLX, bit[0] of Rm <strong>must be 1</strong> for correct execution. (<a href="https://developer.arm.com/documentation/dui0662/b/The-Cortex-M0--Instruction-Set/Branch-and-control-instructions/B--BL--BX--and-BLX?lang=en">Cortex-M0+ Devices Generic User Guide</a>)</p></blockquote><p>跳轉目標位置的 bit[0] 在 ARM B instruction 是代表切換 ARM / Thumb state，而 cortex-M0+ 實作 The ARMv6-M Thumb® instruction set，所以要設為 1。</p><h3 id=references>References</h3><ol><li><a href=https://datasheets.raspberrypi.org/rp2040/rp2040-datasheet.pdf>https://datasheets.raspberrypi.org/rp2040/rp2040-datasheet.pdf</a></li></ol><h2 id=結語>結語</h2><p>不得不說 Raspberry Pi 提供非常完整的文件和教學內容，不論是初學者或是進階者都能夠很快上手。而對於想要細部了解其運作流程的開發者來說，只要將 <a href=https://datasheets.raspberrypi.org/rp2040/rp2040-datasheet.pdf>RP2040 Datasheet</a> 搭配 source code 一起看，就可以很快地了解整個運作流程。</p></div><footer class=post-footer><div class=post-nav><a href=https://yushuanhsieh.github.io/posts/2021-06-23-c-extern/ class="post-nav-link prev"><span class=label>← Previous</span>
<span class=title>C extern keyword</span>
</a><a href=https://yushuanhsieh.github.io/posts/2021-09-04-tsmc-sre-interview/ class="post-nav-link next"><span class=label>Next →</span>
<span class=title>台積電 SRE 面試心得</span></a></div></footer></article></main><footer class=site-footer><div class=footer-inner><p class=footer-copyright>&copy; 2026 Cherie's Tech Blog. All rights reserved.</p><p class=footer-powered>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a></p></div></footer></body></html>