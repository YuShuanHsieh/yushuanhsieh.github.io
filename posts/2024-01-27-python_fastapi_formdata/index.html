<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A technical blog about software engineering, system design, and modern development practices."><meta name=author content="Cherie Hsieh"><title>Python FastAPI FormData æ•ˆèƒ½è­°é¡Œ â€” Cherie's Tech Blog</title><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><link rel=stylesheet href="/css/style.css?v=1771496292"></head><body><header class=site-header><div class=header-inner><a href=https://yushuanhsieh.github.io/ class=site-logo><span class=logo-icon>âŸ¨/âŸ©</span>
<span class=logo-text>Cherie's Tech Blog</span></a><nav class=site-nav><a href=/ class=nav-link>Home</a>
<a href=/posts/ class=nav-link>Posts</a>
<a href=/categories/ class=nav-link>Categories</a>
<a href=/about/ class=nav-link>About</a></nav><button class=mobile-menu-toggle aria-label="Toggle menu">
<span></span>
<span></span>
<span></span></button></div></header><main class=site-main><article class=single-post><header class=post-header><h1 class=post-title>Python FastAPI FormData æ•ˆèƒ½è­°é¡Œ</h1><div class=post-meta><time datetime=2024-01-26>January 26, 2024</time>
<span class=separator>Â·</span>
<span class=reading-time>9 min read</span></div><div class=post-categories><a href=https://yushuanhsieh.github.io/categories/python/>Python</a>
<a href=https://yushuanhsieh.github.io/categories/go/>Go</a></div></header><div class=post-content><p>åœ¨å¯¦ä½œæª”æ¡ˆä¸Šå‚³ä¸¦åŠ è§£å¯†çš„æœå‹™æ™‚ï¼Œé‡åˆ°äº† user request æ•¸é‡å¢å¤šï¼Œé€ æˆ lead time å¤§å¹…æå‡çš„å•é¡Œã€‚æœå‹™æœ¬èº«æ˜¯ä½¿ç”¨ Python + FastAPI framework å¯¦ä½œï¼Œåœ¨æ’é™¤äº†ç¶²è·¯é »å¯¬å•é¡Œå’Œ server æ•ˆèƒ½å•é¡Œå¾Œï¼Œæ‡·ç–‘æ˜¯ Python æˆ– framework å°è‡´å»¶é²æ™‚é–“æ‹‰é•·ï¼Œæ‰€ä»¥å°±æ±ºå®šå¾æ­¤åœ°æ–¹è‘—æ‰‹é€²è¡Œ benchmark å¯¦é©—ï¼Œä¾†è§€å¯Ÿç“¶é ¸æ˜¯ç™¼ç”Ÿåœ¨ä½•è™•ã€‚</p><p>ç”±æ–¼æœ€çµ‚ç›®çš„é‚„æ˜¯å¸Œæœ›èƒ½æ‰¾å‡ºæ”¹å–„çš„æ–¹å¼ï¼Œè€Œæ—¢ç„¶èªç‚ºå•é¡Œæ˜¯å‡ºåœ¨ Python å’Œ framework ä¸Šï¼Œé€™æ¬¡å¯¦é©—å°±æœƒå…ˆä½¿ç”¨ FastAPI èˆ‡ aiohttp å¯«çš„ HTTP API service é€²è¡Œæ•ˆèƒ½æ¯”è¼ƒï¼›æ­¤å¤–ä¹Ÿä½¿ç”¨ Golang å¯¦ä½œçš„ç‰ˆæœ¬ä¾†æ¸¬é‡ä¸åŒèªè¨€ä¹‹é–“çš„æ•ˆèƒ½è½å·®æœƒåˆ°å¤šå°‘ã€‚</p><p>While implementing a file upload service with encryption and decryption, we encountered an issue where an increase in user requests significantly increased the lead time. The service is built using Python and the FastAPI framework. After ruling out network bandwidth and server performance issues, we suspect that the delay may be due to Python or the framework. Therefore, we decided to start with a benchmarking experiment in this area to identify where the bottleneck occurs.</p><p>Since our ultimate goal is to find a way to improve performance, and we believe the issue lies with Python and the framework, this experiment will initially compare the performance of an HTTP API service written using FastAPI and aiohttp. Additionally, we will use a version implemented in Golang to measure the performance differences between languages.</p><div class=info-block>ğŸ“– é¸æ“‡ aiohttp çš„åŸå› ï¼šaiohttp å……åˆ†åœ°åˆ©ç”¨ Python asyncio ç‰¹æ€§ä¾†å¯¦ç¾ï¼Œæœƒæ˜¯ä¸éŒ¯çš„åƒè€ƒå°è±¡ã€‚</div><h2 id=experiment-environment>Experiment Environment</h2><h3 id=server>Server</h3><p>4 core & 8G memory</p><h2 id=libraries>Libraries</h2><p>Python 3.10.12</p><p>FastAPI 0.109.0</p><p>aiohttp 3.9.1</p><p>Golang 1.21</p><h3 id=testing-tool>Testing Tool</h3><p><a href=https://github.com/tsenart/vegeta>https://github.com/tsenart/vegeta</a></p><h2 id=experiments>Experiments</h2><h3 id=testing-scenarios>Testing scenarios</h3><ul><li>100MB file çš„æª”æ¡ˆä¸Šå‚³</li><li>Sync API</li><li>RPS: 10/sec. Duration: 10 sec. Total requests: 100</li></ul><h3 id=python-fastapi-vs-aiohttp>Python FastAPI vs. aiohttp</h3><p>Python æ˜¯ä½¿ç”¨ Cpython runtime ï¼Œå…¶é è¨­æ˜¯ single thread çš„ runtime æ¶æ§‹ã€‚å…¶ä¸­ä½¿ç”¨ FastAPI å’Œ aiohttp æ¸¬é‡çš„çµæœå¦‚ä¸‹ï¼š</p><p><strong>FastAPI</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>Requests      <span style=color:#0550ae>[</span>total, rate, throughput<span style=color:#0550ae>]</span>         100, 10.10, 1.99
</span></span><span style=display:flex><span>Duration      <span style=color:#0550ae>[</span>total, attack, wait<span style=color:#0550ae>]</span>             50.208s, 9.9s, 40.308s
</span></span><span style=display:flex><span>Latencies     <span style=color:#0550ae>[</span>min, mean, 50, 90, 95, 99, max<span style=color:#0550ae>]</span>  12.928s, 41.037s, 42.505s, 43.851s, 43.96s, 44.04s, 44.049s
</span></span><span style=display:flex><span>Bytes Out     <span style=color:#0550ae>[</span>total, mean<span style=color:#0550ae>]</span>                     10341963800, 103419638.00
</span></span><span style=display:flex><span>Success       <span style=color:#0550ae>[</span>ratio<span style=color:#0550ae>]</span>                           100.00%
</span></span></code></pre></td></tr></table></div></div><p><strong>aiohttp</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>Requests      <span style=color:#0550ae>[</span>total, rate, throughput<span style=color:#0550ae>]</span>         100, 10.10, 3.80
</span></span><span style=display:flex><span>Duration      <span style=color:#0550ae>[</span>total, attack, wait<span style=color:#0550ae>]</span>             26.297s, 9.9s, 16.398s
</span></span><span style=display:flex><span>Latencies     <span style=color:#0550ae>[</span>min, mean, 50, 90, 95, 99, max<span style=color:#0550ae>]</span>  1.006s, 15.938s, 17.547s, 18.589s, 18.633s, 18.958s, 19.144s
</span></span><span style=display:flex><span>Bytes Out     <span style=color:#0550ae>[</span>total, mean<span style=color:#0550ae>]</span>                     10341963800, 103419638.00
</span></span><span style=display:flex><span>Success       <span style=color:#0550ae>[</span>ratio<span style=color:#0550ae>]</span>                           100.00%
</span></span></code></pre></td></tr></table></div></div><p>å¾é‡æ¸¬æ•¸æ“šä¸­å¯ä»¥çœ‹åˆ°ï¼Œ ä»¥ P50 ç‚ºä¾‹ï¼Œaiohttp çš„æ•ˆèƒ½æ¯”èµ· FastAPI å¿«äº†ç´„ 60%ï¼Œå¯çŸ¥ FastAPI çš„å¯¦ä½œåœ¨è™•ç† form é¡å‹å¤§æª”æ¡ˆä¸Šå‚³çš„æ•ˆç‡ä¸¦ä¸ä½³ã€‚æ‹‰è¿‘ä¸€é»çœ‹æ¯å€‹ request çš„ lead time è¶¨å‹¢åœ–ï¼ŒFastAPI å¾æœ€åˆçš„ 12 sec. å¿«é€Ÿæå‡è‡³ç´„ 40 sec. ç”±æ–¼ request æ•¸é‡å¢åŠ é€ æˆå»¶é²æ™‚é–“ç´¯ç©ï¼Œå› æ­¤å¾ŒçºŒçš„ request éƒ½æœƒå—åˆ°å‰é¢è™•ç† request çš„æ™‚é–“å½±éŸ¿ï¼Œé€™æ•¸æ“šä¹Ÿé¡¯ç¤º corouitne çš„æ•¸é‡å’Œ CPU ä½¿ç”¨æ¯”ç‡åé«˜å°è‡´æ­¤ç¾è±¡ã€‚é¡ä¼¼çš„ç¾è±¡ä¹Ÿåæ‡‰åœ¨ aiohttp å¯¦ä½œä¸Šï¼Œä¸éå¯ä»¥çœ‹åˆ°è¶¨å‹¢ç·šè¼ƒç·©ï¼Œèƒ½å¤ èªªæ˜ aiohttp è¼ƒèƒ½æœ‰æ•ˆåœ°è™•ç† parallel file uploading çš„ concurrency è­°é¡Œã€‚</p><p><img src=/posts/20240127_python-fastapi_1.png alt="lead time è¶¨å‹¢åœ–"></p><p>é€é Python profiling tool (pyinstrument) ä¾†æŸ¥çœ‹å…·é«”çš„å»¶é²ç™¼ç”Ÿé»ï¼Œå¯ä»¥çœ‹åˆ° FastAPI å¯¦éš›ä¸Šæœƒå‘¼å« starlette çš„ MultiPartParser ä¾†è§£æå‡º Form Data çš„æ¬„ä½å…§å®¹ï¼Œè€Œç•¶ Parser åœ¨ç™¼ç¾æ­¤æ¬„ä½çš„å…§å®¹æ˜¯ file å‹å¼æ™‚ï¼Œæœƒå†å‘¼å« UploadFile ä¾†è®€å–è³‡æ–™ã€‚å…¶ä¸­å¤§å¤šæ•¸çš„ CPU æ™‚é–“éƒ½èŠ±è²»åœ¨ awaitï¼Œå› æ­¤ç•¶å‡ºç¾éå¤šçš„ task (coroutine)ï¼Œå°±æœƒé€ æˆæ˜é¡¯çš„å»¶é²ã€‚</p><p><img src=/posts/20240127_python-fastapi_2.png alt></p><p>æˆ‘å€‘å¾ä½¿ç”¨ä¸åŒæ•¸é‡çš„ core ä¸­ä¾†é€²ä¸€æ­¥è§€å¯Ÿã€‚</p><div class=info-block>ğŸ“–Â Python ç’°å¢ƒä¸‹ï¼Œå¦‚æœè¦è®“ server èƒ½é‹ç”¨å¤šå€‹ core ä¾† <b>parallel</b> çš„è™•ç† requestï¼Œéœ€è¦ä½¿ç”¨ multiprocessing moduleã€‚è€Œ FastAPI æœ¬èº«ä½¿ç”¨ uvicorn web server frameworkï¼Œå› æ­¤æˆ‘å€‘å¯ä»¥è¨­å®š uvicorn çš„ worker åƒæ•¸ä¾†é€²è¡Œå¯¦é©—ã€‚</div><p>å¾æ•¸æ“šä¸­ç™¼ç¾ï¼Œç•¶æˆ‘å€‘å¢åŠ  1 å€‹ core ä½¿ç”¨æ™‚ï¼Œå‰‡åœ¨é€™æ¨£çš„ä½¿ç”¨æƒ…å¢ƒä¹‹ä¸‹ï¼Œ FastAPI è™•ç† request æ•ˆç‡æå‡ 50%ï¼Œé€™ä¹Ÿåæ‡‰ request ä½¿ç”¨ CPU çš„æ¯”ç‡é«˜ï¼Œå¦‚æœæ˜¯ I/O bound çš„è©±ï¼Œæ•ˆæœæå‡ä¸æœƒé€™éº¼æ˜é¡¯ã€‚</p><p><img src=/posts/20240127_python-fastapi_3.png alt></p><p><strong>Summary</strong></p><p>æ ¹æ“šä¸Šè¿°çš„è§€å¯Ÿï¼Œé‡æ–°æ•´ç†ä¸€ä¸‹è«–é»ï¼šåœ¨ file upload with FormData çš„ use case ä¸‹ï¼ŒFastAPI å‚¾å‘ CPU bound å¯¦ä½œè€Œ aiohttp å‰‡æ˜¯å‚¾å‘ I/O bound å¯¦ä½œï¼Œè€Œæ•¸æ“šé¡¯ç¤º aiohttp ä½¿ç”¨çš„ asyncio å¯¦ä½œæ–¹å¼çš„è¼ƒä½³ã€‚</p><h3 id=python-vs-golang>Python vs. Golang</h3><p>è€ƒé‡åˆ° Python æœ¬èº«çš„æ•ˆèƒ½é™åˆ¶ï¼Œå¦‚æœ Python ç„¡æ³•é”åˆ°æˆ‘å€‘å°æ–¼æ­¤æœå‹™çš„ç›®æ¨™ï¼Œé‚£ä½¿ç”¨å…¶ä»–èªè¨€å¯¦ä½œä¹Ÿæ˜¯ä¸€å€‹æ–¹å‘ï¼Œå› æ­¤å°±ä¾†æ¯”è¼ƒä¸€ä¸‹æ•ˆç‡å·®ç•°ã€‚ä»¥ä¸‹ç‚ºå¯¦é©—çµæœï¼Œå…¶ä¸­ server çš†ä½¿ç”¨ 2 coreã€‚</p><p><strong>Python FastAPI</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>Requests      <span style=color:#0550ae>[</span>total, rate, throughput<span style=color:#0550ae>]</span>         100, 10.10, 3.60
</span></span><span style=display:flex><span>Duration      <span style=color:#0550ae>[</span>total, attack, wait<span style=color:#0550ae>]</span>             27.749s, 9.901s, 17.848s
</span></span><span style=display:flex><span>Latencies     <span style=color:#0550ae>[</span>min, mean, 50, 90, 95, 99, max<span style=color:#0550ae>]</span>  1.535s, 16.763s, 18.373s, 20s, 20.156s, 20.578s, 20.628s
</span></span><span style=display:flex><span>Bytes Out     <span style=color:#0550ae>[</span>total, mean<span style=color:#0550ae>]</span>                     10341963800, 103419638.00
</span></span><span style=display:flex><span>Success       <span style=color:#0550ae>[</span>ratio<span style=color:#0550ae>]</span>                           100.00%
</span></span></code></pre></td></tr></table></div></div><p><strong>Golang</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>Requests      <span style=color:#0550ae>[</span>total, rate, throughput<span style=color:#0550ae>]</span>         100, 10.10, 8.12
</span></span><span style=display:flex><span>Duration      <span style=color:#0550ae>[</span>total, attack, wait<span style=color:#0550ae>]</span>             12.308s, 9.901s, 2.408s
</span></span><span style=display:flex><span>Latencies     <span style=color:#0550ae>[</span>min, mean, 50, 90, 95, 99, max<span style=color:#0550ae>]</span>  702.25ms, 2.103s, 2.037s, 3.402s, 3.504s, 3.971s, 4.147s
</span></span><span style=display:flex><span>Bytes Out     <span style=color:#0550ae>[</span>total, mean<span style=color:#0550ae>]</span>                     10341963800, 103419638.00
</span></span><span style=display:flex><span>Success       <span style=color:#0550ae>[</span>ratio<span style=color:#0550ae>]</span>                           100.00%
</span></span></code></pre></td></tr></table></div></div><p>æ¯«ç„¡æ‡¸å¿µçš„ï¼ŒGolang çš„æ•ˆç‡æ¯”èµ·åŸæœ‰çš„ Python FastAPI ç‰ˆæœ¬æé«˜äº†è¶…é 80%ï¼Œé™¤äº† Golang compiled language çš„å„ªå‹¢ä¹‹å¤–ï¼Œgoroutine çš„è¨­è¨ˆåœ¨è™•ç†å¤§æª”æ¡ˆä¸Šå‚³çš„ request ä¸Šä¹Ÿæœ‰ä¸éŒ¯çš„è¡¨ç¾ã€‚</p><p><img src=/posts/20240127_python-fastapi_4.png alt></p><h2 id=çµèª>çµèª</h2><p>Python FastAPI æ˜¯å€‹å¾ˆçŸ¥åä¹Ÿå¾ˆå„ªç§€çš„ web frameworkï¼Œä¸éåœ¨è™•ç† file uploading with formdata çš„æ•ˆç‡ä¸¦ä¸ä½³ã€‚å…§æ–‡ä¸­æ¯”è¼ƒäº† Python FastAPI èˆ‡ aiohttp çš„æ•ˆèƒ½å·®ç•°ï¼Œå…¶ä¸­ aiohttp çš„å¯¦ä½œæ–¹å¼é¡¯ç¤ºå‡ºè¼ƒå¥½çš„æ•ˆèƒ½è¡¨ç¾ï¼Œæå‡äº†å°‡è¿‘ 60% é€Ÿåº¦ã€‚å¦å¤–ä¹Ÿæ¯”è¼ƒäº† Golang ç‰ˆæœ¬çš„å¯¦ä½œï¼Œå…¶æ•ˆèƒ½æœ‰è¶…é 80% çš„æ”¹å–„ã€‚</p><h2 id=é–’èŠ>é–’èŠ</h2><div class=author-chat-block>åœ¨ä½¿ç”¨ Python é–‹ç™¼ API server æ™‚ï¼Œé‡åˆ°ä¸å°‘æ•ˆèƒ½å•é¡Œï¼Œç•¶ç„¶å…¶ä»–èªè¨€ä¹Ÿæœƒæœ‰æ•ˆèƒ½è­°é¡Œï¼Œä¸é Python èƒ½æ‰¿å—æ¥µé™æ›´ä½ã€‚ Python æˆ‘è¦ºå¾—æ›´é©åˆæ‹¿ä¾†å¯«å¯«è‡ªå‹•æµç¨‹ script æˆ–æ˜¯ä¸å¤ªéœ€è¦å¤§é‡ parallel åŸ·è¡Œçš„å ´æ™¯ï¼Œå¦‚æœæ˜¯ Production çš„ API service çš„è©±ï¼Œé‚„æ˜¯é¸æ“‡å…¶ä»–èªè¨€æ¯”è¼ƒå¥½ï¼Œä¸ç„¶å°±æœƒåˆå¤šè²»ä¸€ç•ªå·¥äº†...ğŸ¥¹<br>è©±èªªé€™ç¯‡æ–‡ç« æ–·æ–·çºŒçºŒçš„ä¹Ÿå¯¦é©—äº†ä¸€å…©å€‹ç¦®æ‹œï¼ŒåŸæœ¬ loading test ä¸€ç›´æ˜¯ä½¿ç”¨ Grafana k6ï¼Œä½†æ˜¯å®ƒåœ¨ large-size file uploading çš„æ¸¬è©¦è¡¨ç¾çœŸçš„å¾ˆå·®ï¼Œåº•å±¤å¯¦ä½œæ–¹å¼ä½¿ç”¨å¤ªå¤š memoryï¼Œå°è‡´å¸¸å¸¸è®“æ•´å€‹ process è¢«å¼·åˆ¶ killedï¼Œå› æ­¤å¾Œä¾†æ”¹ç”¨ vegeta é€™å¥— loading test toolï¼Œä¸é k6 æ”¯æ´çš„æ¸¬è©¦å ´æ™¯é‚„æ˜¯æ¯”è¼ƒé½Šå…¨çš„ï¼Œé™¤éç‰¹æ®Šä½¿ç”¨æƒ…å¢ƒï¼Œä¸ç„¶ k6 é‚„æ˜¯å¾ˆä¸éŒ¯çš„å·¥å…·ã€‚<br>é€™æ¬¡æ¸¬è©¦å¯¦é©—ä¹Ÿè®“æˆ‘æ„Ÿå—åˆ° API testing çš„é‡è¦æ€§ï¼Œè©²å»ç ”ç©¶ä¸€ä¸‹å¦‚ä½•åšå¥½ä¸Šç·šå‰çš„ API testing äº†ã€‚</div></div><footer class=post-footer><div class=post-nav><a href=https://yushuanhsieh.github.io/posts/2024-01-21-status_update/ class="post-nav-link prev"><span class=label>â† Previous</span>
<span class=title>è¿‘æ³æ›´æ–°</span>
</a><a href=https://yushuanhsieh.github.io/posts/2024-02-18-file_uploading/ class="post-nav-link next"><span class=label>Next â†’</span>
<span class=title>The issue of uploading a large-size file using HTTP formdata</span></a></div></footer></article></main><footer class=site-footer><div class=footer-inner><p class=footer-copyright>&copy; 2026 Cherie's Tech Blog. All rights reserved.</p><p class=footer-powered>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a></p></div></footer></body></html>