<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A technical blog about software engineering, system design, and modern development practices."><meta name=author content="Cherie Hsieh"><title>Golang Performance Optimization Report — Cherie's Tech Blog</title><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><link rel=stylesheet href="/css/style.css?v=1771496292"></head><body><header class=site-header><div class=header-inner><a href=https://yushuanhsieh.github.io/ class=site-logo><span class=logo-icon>⟨/⟩</span>
<span class=logo-text>Cherie's Tech Blog</span></a><nav class=site-nav><a href=/ class=nav-link>Home</a>
<a href=/posts/ class=nav-link>Posts</a>
<a href=/categories/ class=nav-link>Categories</a>
<a href=/about/ class=nav-link>About</a></nav><button class=mobile-menu-toggle aria-label="Toggle menu">
<span></span>
<span></span>
<span></span></button></div></header><main class=site-main><article class=single-post><header class=post-header><h1 class=post-title>Golang Performance Optimization Report</h1><div class=post-meta><time datetime=2026-02-18>February 18, 2026</time>
<span class=separator>·</span>
<span class=reading-time>7 min read</span></div><div class=post-categories><a href=https://yushuanhsieh.github.io/categories/go/>Go</a></div></header><div class=post-content><h2 id=overview>Overview</h2><p>This report summarizes three notable performance optimization pull requests merged in the past two weeks across popular open-source Golang projects. Each PR targets a specific bottleneck — ranging from algorithmic complexity reduction to in-memory caching — and delivers measurable, significant speedups.</p><hr><h2 id=pr-1--prometheusprometheus--merged-feb-16-2026>PR #1 — <code>prometheus/prometheus</code> · Merged Feb 16, 2026</h2><h3 id=tsdb-optimize-labelvalues-api-performance>tsdb: Optimize LabelValues API performance</h3><p><strong>Repository:</strong> <a href=https://github.com/prometheus/prometheus>prometheus/prometheus</a> (55,000+ stars)
<strong>PR:</strong> <a href=https://github.com/prometheus/prometheus/pull/18069>#18069</a>
<strong>Author:</strong> mishraa-G | <strong>Merged by:</strong> bboreham</p><hr><h3 id=problem>Problem</h3><p>The <code>FindIntersectingPostings</code> function suffered from severe O(N) performance degradation when processing matchers with sparse intersections. If a matcher&rsquo;s posting ID was far ahead of the current candidate (e.g., matcher at 1,000,000 while candidate was at 0), the function would call <code>Next()</code> approximately 1,000,000 times — resulting in query timeouts for large datasets.</p><h3 id=root-cause>Root Cause</h3><p>The function relied on sequential iteration via <code>Next()</code> for each candidate posting, with no ability to skip ahead. The <code>LabelValues</code> API path was therefore dramatically slower than the <code>Series</code> API for equivalent queries.</p><h3 id=solution>Solution</h3><p>Replace <code>Next()</code> calls with <code>Seek()</code> operations on the candidate iterator. This enables logarithmic-time skipping through non-matching ranges, mirroring the approach already used in the faster <code>Series</code> API.</p><h3 id=key-code-changes>Key Code Changes</h3><p><strong>Before — sequential <code>Next()</code> iteration:</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#57606a>// postings_with_index_heap.go</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#1f2328>h</span><span style=color:#fff> </span><span style=color:#0550ae>*</span><span style=color:#1f2328>postingsWithIndexHeap</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#6639ba>next</span><span style=color:#1f2328>()</span><span style=color:#fff> </span><span style=color:#cf222e>error</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>pi</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#0550ae>*</span><span style=color:#1f2328>h</span><span style=color:#1f2328>)[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>]</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>next</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>pi</span><span style=color:#1f2328>.</span><span style=color:#1f2328>p</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Next</span><span style=color:#1f2328>()</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#57606a>// ...</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#57606a>// In FindIntersectingPostings:</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff> </span><span style=color:#cf222e>else</span><span style=color:#fff> </span><span style=color:#cf222e>if</span><span style=color:#fff> </span><span style=color:#1f2328>err</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>h</span><span style=color:#1f2328>.</span><span style=color:#6639ba>next</span><span style=color:#1f2328>();</span><span style=color:#fff> </span><span style=color:#1f2328>err</span><span style=color:#fff> </span><span style=color:#0550ae>!=</span><span style=color:#fff> </span><span style=color:#cf222e>nil</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>return</span><span style=color:#fff> </span><span style=color:#cf222e>nil</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>err</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>After — logarithmic <code>Seek()</code> jumping:</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#57606a>// Renamed to seekHead() to clarify it operates only on the heap&#39;s top element</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#1f2328>h</span><span style=color:#fff> </span><span style=color:#0550ae>*</span><span style=color:#1f2328>postingsWithIndexHeap</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#6639ba>seekHead</span><span style=color:#1f2328>(</span><span style=color:#1f2328>val</span><span style=color:#fff> </span><span style=color:#1f2328>storage</span><span style=color:#1f2328>.</span><span style=color:#1f2328>SeriesRef</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#cf222e>error</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>pi</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#0550ae>*</span><span style=color:#1f2328>h</span><span style=color:#1f2328>)[</span><span style=color:#0550ae>0</span><span style=color:#1f2328>]</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>next</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>pi</span><span style=color:#1f2328>.</span><span style=color:#1f2328>p</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Seek</span><span style=color:#1f2328>(</span><span style=color:#1f2328>val</span><span style=color:#1f2328>)</span><span style=color:#fff>  </span><span style=color:#57606a>// Jumps directly to target value</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#57606a>// ...</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#57606a>// In FindIntersectingPostings:</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff> </span><span style=color:#cf222e>else</span><span style=color:#fff> </span><span style=color:#cf222e>if</span><span style=color:#fff> </span><span style=color:#1f2328>err</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>h</span><span style=color:#1f2328>.</span><span style=color:#6639ba>seekHead</span><span style=color:#1f2328>(</span><span style=color:#1f2328>p</span><span style=color:#1f2328>.</span><span style=color:#6639ba>At</span><span style=color:#1f2328>());</span><span style=color:#fff> </span><span style=color:#1f2328>err</span><span style=color:#fff> </span><span style=color:#0550ae>!=</span><span style=color:#fff> </span><span style=color:#cf222e>nil</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>return</span><span style=color:#fff> </span><span style=color:#cf222e>nil</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>err</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>New benchmark for the sparse intersection case:</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#6639ba>BenchmarkLabelValues_SlowPath</span><span style=color:#1f2328>(</span><span style=color:#1f2328>b</span><span style=color:#fff> </span><span style=color:#0550ae>*</span><span style=color:#1f2328>testing</span><span style=color:#1f2328>.</span><span style=color:#1f2328>B</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#57606a>// Reproduces regression: dense candidates + matcher far ahead = O(N) iteration</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#57606a>// 100k+ series in candidate posting list, matcher positioned far ahead</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>b</span><span style=color:#1f2328>.</span><span style=color:#6639ba>ResetTimer</span><span style=color:#1f2328>()</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>for</span><span style=color:#fff> </span><span style=color:#1f2328>i</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#1f2328>;</span><span style=color:#fff> </span><span style=color:#1f2328>i</span><span style=color:#fff> </span><span style=color:#1f2328>&lt;</span><span style=color:#fff> </span><span style=color:#1f2328>b</span><span style=color:#1f2328>.</span><span style=color:#1f2328>N</span><span style=color:#1f2328>;</span><span style=color:#fff> </span><span style=color:#1f2328>i</span><span style=color:#0550ae>++</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#1f2328>_</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>err</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>idx</span><span style=color:#1f2328>.</span><span style=color:#6639ba>LabelValues</span><span style=color:#1f2328>(</span><span style=color:#1f2328>ctx</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0550ae>0</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>math</span><span style=color:#1f2328>.</span><span style=color:#1f2328>MaxInt64</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#0a3069>&#34;label&#34;</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>matchers</span><span style=color:#0550ae>...</span><span style=color:#1f2328>)</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#1f2328>require</span><span style=color:#1f2328>.</span><span style=color:#6639ba>NoError</span><span style=color:#1f2328>(</span><span style=color:#1f2328>b</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>err</span><span style=color:#1f2328>)</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=benchmark-results>Benchmark Results</h3><table><thead><tr><th>Scenario</th><th>Before</th><th>After</th><th>Improvement</th></tr></thead><tbody><tr><td>Sparse intersection (new benchmark)</td><td>~919,901 ns/op</td><td>~836 ns/op</td><td><strong>99.91%</strong></td></tr><tr><td>High-overlap (existing benchmark)</td><td>2.718 ms/op</td><td>1.408 ms/op</td><td><strong>48.20%</strong></td></tr></tbody></table><h3 id=review-highlights>Review Highlights</h3><p>Reviewer bboreham called it &ldquo;a great find&rdquo; and requested method consolidation and naming clarity. The author implemented the suggestions by renaming <code>seek()</code> to <code>seekHead()</code> and removing unused code paths. Verified with <code>go test ./tsdb/index/...</code> showing no regressions.</p><hr><h2 id=pr-2--grafanagrafana--merged-feb-10-2026>PR #2 — <code>grafana/grafana</code> · Merged Feb 10, 2026</h2><h3 id=library-panels-add-a-folder-tree-cache-for-getallhandler>Library Panels: Add a Folder Tree Cache for getAllHandler</h3><p><strong>Repository:</strong> <a href=https://github.com/grafana/grafana>grafana/grafana</a> (65,000+ stars)
<strong>PR:</strong> <a href=https://github.com/grafana/grafana/pull/117475>#117475</a>
<strong>Author:</strong> RafaelPaulovic | <strong>Reviewed by:</strong> JohnnyQQQQ, renatolabs</p><hr><h3 id=problem-1>Problem</h3><p>Grafana instances with large deployments (14,000+ folders and 1,800+ library panels) experienced unacceptable latency when retrieving all library panels via <code>getAllHandler</code>. Response times reached <strong>up to 52 seconds on unified storage</strong> and <strong>16 seconds on legacy storage</strong> — caused by repeated folder service calls for every element.</p><h3 id=root-cause-1>Root Cause</h3><p>The <code>getAllHandler</code> made a separate folder service call for each library panel to resolve folder metadata. This produced N+1 query behavior proportional to the number of library panels, with no caching between requests.</p><h3 id=solution-1>Solution</h3><p>Introduce a <code>FolderTree</code> data structure providing O(1) lookups for folder hierarchy data, backed by a request-scoped in-memory cache with a 30-second TTL, shared per user/organization combination.</p><h3 id=key-code-changes-1>Key Code Changes</h3><p><strong>New <code>FolderTree</code> data structure (<code>pkg/services/folder/tree.go</code>):</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span><span style=color:#fff> </span><span style=color:#1f2328>FolderTree</span><span style=color:#fff> </span><span style=color:#cf222e>struct</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>Nodes</span><span style=color:#fff>   </span><span style=color:#1f2328>[]</span><span style=color:#1f2328>FolderNode</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>Index</span><span style=color:#fff>   </span><span style=color:#cf222e>map</span><span style=color:#1f2328>[</span><span style=color:#cf222e>string</span><span style=color:#1f2328>]</span><span style=color:#cf222e>int</span><span style=color:#fff>  </span><span style=color:#57606a>// UID → position for O(1) lookup</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>IDIndex</span><span style=color:#fff> </span><span style=color:#cf222e>map</span><span style=color:#1f2328>[</span><span style=color:#cf222e>int64</span><span style=color:#1f2328>]</span><span style=color:#cf222e>int</span><span style=color:#fff>   </span><span style=color:#57606a>// ID  → position for O(1) lookup</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>type</span><span style=color:#fff> </span><span style=color:#1f2328>FolderNode</span><span style=color:#fff> </span><span style=color:#cf222e>struct</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>ID</span><span style=color:#fff>         </span><span style=color:#cf222e>int64</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>UID</span><span style=color:#fff>        </span><span style=color:#cf222e>string</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>Title</span><span style=color:#fff>      </span><span style=color:#cf222e>string</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>Parent</span><span style=color:#fff>     </span><span style=color:#cf222e>int</span><span style=color:#fff>      </span><span style=color:#57606a>// index into Nodes slice</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>Children</span><span style=color:#fff>   </span><span style=color:#1f2328>[]</span><span style=color:#cf222e>int</span><span style=color:#fff>    </span><span style=color:#57606a>// indices into Nodes slice</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>Accessible</span><span style=color:#fff> </span><span style=color:#cf222e>bool</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>Tree construction and key methods:</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#57606a>// NewFolderTree builds the tree from a flat folder slice,</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#57606a>// inserts &#34;General&#34; root at index 0, and wires parent-child relationships.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#6639ba>NewFolderTree</span><span style=color:#1f2328>(</span><span style=color:#1f2328>folders</span><span style=color:#fff> </span><span style=color:#1f2328>[]</span><span style=color:#0550ae>*</span><span style=color:#1f2328>folder</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Folder</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#0550ae>*</span><span style=color:#1f2328>FolderTree</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff> </span><span style=color:#0550ae>...</span><span style=color:#fff> </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#57606a>// Ancestors returns an iterator yielding all accessible parent folders</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#57606a>// from immediate parent up to root — used for permission checks.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#1f2328>ft</span><span style=color:#fff> </span><span style=color:#0550ae>*</span><span style=color:#1f2328>FolderTree</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#6639ba>Ancestors</span><span style=color:#1f2328>(</span><span style=color:#1f2328>uid</span><span style=color:#fff> </span><span style=color:#cf222e>string</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#1f2328>iter</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Seq</span><span style=color:#1f2328>[</span><span style=color:#1f2328>FolderNode</span><span style=color:#1f2328>]</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff> </span><span style=color:#0550ae>...</span><span style=color:#fff> </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#57606a>// Children performs a breadth-first traversal yielding all descendants.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#1f2328>ft</span><span style=color:#fff> </span><span style=color:#0550ae>*</span><span style=color:#1f2328>FolderTree</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#6639ba>Children</span><span style=color:#1f2328>(</span><span style=color:#1f2328>uid</span><span style=color:#fff> </span><span style=color:#cf222e>string</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#1f2328>iter</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Seq</span><span style=color:#1f2328>[</span><span style=color:#1f2328>FolderNode</span><span style=color:#1f2328>]</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff> </span><span style=color:#0550ae>...</span><span style=color:#fff> </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#57606a>// Contains and GetTitle provide O(1) accessibility and title lookups.</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#1f2328>ft</span><span style=color:#fff> </span><span style=color:#0550ae>*</span><span style=color:#1f2328>FolderTree</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#6639ba>Contains</span><span style=color:#1f2328>(</span><span style=color:#1f2328>uid</span><span style=color:#fff> </span><span style=color:#cf222e>string</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#cf222e>bool</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff> </span><span style=color:#0550ae>...</span><span style=color:#fff> </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#1f2328>ft</span><span style=color:#fff> </span><span style=color:#0550ae>*</span><span style=color:#1f2328>FolderTree</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#6639ba>GetTitle</span><span style=color:#1f2328>(</span><span style=color:#1f2328>uid</span><span style=color:#fff> </span><span style=color:#cf222e>string</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#cf222e>string</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff> </span><span style=color:#0550ae>...</span><span style=color:#fff> </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>Cache layer (<code>pkg/services/libraryelements/cache.go</code>):</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#57606a>// 30-second TTL cache keyed by orgID+userUID</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>type</span><span style=color:#fff> </span><span style=color:#1f2328>folderTreeCache</span><span style=color:#fff> </span><span style=color:#cf222e>struct</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>mu</span><span style=color:#fff>    </span><span style=color:#1f2328>sync</span><span style=color:#1f2328>.</span><span style=color:#1f2328>RWMutex</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>store</span><span style=color:#fff> </span><span style=color:#cf222e>map</span><span style=color:#1f2328>[</span><span style=color:#1f2328>cacheKey</span><span style=color:#1f2328>]</span><span style=color:#0550ae>*</span><span style=color:#1f2328>cachedTree</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>type</span><span style=color:#fff> </span><span style=color:#1f2328>cachedTree</span><span style=color:#fff> </span><span style=color:#cf222e>struct</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>tree</span><span style=color:#fff>      </span><span style=color:#0550ae>*</span><span style=color:#1f2328>folder</span><span style=color:#1f2328>.</span><span style=color:#1f2328>FolderTree</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>expiresAt</span><span style=color:#fff> </span><span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Time</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=performance-results>Performance Results</h3><table><thead><tr><th>Request Type</th><th>Before</th><th>After (1st request)</th><th>After (2nd request)</th></tr></thead><tbody><tr><td>Unified Storage</td><td>52.3s</td><td><strong>8.4s</strong></td><td><strong>0.4s</strong></td></tr><tr><td>Legacy Storage</td><td>16.4s</td><td><strong>6.9s</strong></td><td><strong>0.4s</strong></td></tr></tbody></table><h3 id=review-highlights-1>Review Highlights</h3><p>The PR was approved by JohnnyQQQQ and renatolabs after discussion on cache scope — ultimately made global with fallback support for cache misses. Successfully backported to release-12.3.3.</p><hr><h2 id=pr-3--grafanagrafana--merged-feb-9-2026>PR #3 — <code>grafana/grafana</code> · Merged Feb 9, 2026</h2><h3 id=alerting-improve-performance-of-folder-access-checks>Alerting: Improve Performance of Folder Access Checks</h3><p><strong>Repository:</strong> <a href=https://github.com/grafana/grafana>grafana/grafana</a> (65,000+ stars)
<strong>PR:</strong> <a href=https://github.com/grafana/grafana/pull/117080>#117080</a>
<strong>Author:</strong> alexander-akhmetov | <strong>Milestone:</strong> 12.4.x</p><hr><h3 id=problem-2>Problem</h3><p>In Grafana&rsquo;s alerting system, every folder access permission check triggered a call to the database-backed scope resolver. For high-frequency alerting rule evaluations, this produced unnecessary database round-trips even when the required folder hierarchy information was already available in memory.</p><h3 id=root-cause-2>Root Cause</h3><p>The <code>HasAccessInFolder()</code> and <code>AuthorizeAccessInFolder()</code> functions always delegated to the database-backed access control evaluators with no fast path for cases where folder fullpath UIDs were pre-computed and accessible locally.</p><h3 id=solution-2>Solution</h3><p>Convert <code>Namespace</code> from a type alias to a struct carrying a <code>FullpathUIDs</code> field. Introduce <code>checkFolderAccessByFullpath()</code> as an in-memory fast path — falling back to the database only when fullpath data is unavailable.</p><h3 id=key-code-changes-2>Key Code Changes</h3><p><strong>Updated <code>Namespace</code> struct (adding fullpath data):</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#57606a>// Before: Namespace was a simple type alias</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>type</span><span style=color:#fff> </span><span style=color:#1f2328>Namespace</span><span style=color:#fff> </span><span style=color:#1f2328>=</span><span style=color:#fff> </span><span style=color:#1f2328>models</span><span style=color:#1f2328>.</span><span style=color:#1f2328>AlertRuleGroup</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#57606a>// After: Namespace is a struct with in-memory hierarchy data</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>type</span><span style=color:#fff> </span><span style=color:#1f2328>Namespace</span><span style=color:#fff> </span><span style=color:#cf222e>struct</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>models</span><span style=color:#1f2328>.</span><span style=color:#1f2328>AlertRuleGroup</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>FullpathUIDs</span><span style=color:#fff> </span><span style=color:#cf222e>string</span><span style=color:#fff>  </span><span style=color:#57606a>// pre-computed folder hierarchy, e.g. &#34;uid1/uid2/uid3&#34;</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#57606a>// New constructor helpers</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#6639ba>NewNamespace</span><span style=color:#1f2328>(</span><span style=color:#1f2328>group</span><span style=color:#fff> </span><span style=color:#1f2328>models</span><span style=color:#1f2328>.</span><span style=color:#1f2328>AlertRuleGroup</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#1f2328>Namespace</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff> </span><span style=color:#0550ae>...</span><span style=color:#fff> </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#6639ba>NewNamespaceUID</span><span style=color:#1f2328>(</span><span style=color:#1f2328>uid</span><span style=color:#fff> </span><span style=color:#cf222e>string</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#1f2328>Namespace</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff> </span><span style=color:#0550ae>...</span><span style=color:#fff> </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>New interface for in-memory permission checks:</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#57606a>// NamespacedWithFullpath allows callers to access folder hierarchy data</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#cf222e>type</span><span style=color:#fff> </span><span style=color:#1f2328>NamespacedWithFullpath</span><span style=color:#fff> </span><span style=color:#cf222e>interface</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>models</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Namespaced</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#6639ba>GetFullpathUIDs</span><span style=color:#1f2328>()</span><span style=color:#fff> </span><span style=color:#cf222e>string</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>New fast-path function <code>checkFolderAccessByFullpath</code>:</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#6639ba>checkFolderAccessByFullpath</span><span style=color:#1f2328>(</span><span style=color:#1f2328>user</span><span style=color:#fff> </span><span style=color:#1f2328>identity</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Requester</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>rule</span><span style=color:#fff> </span><span style=color:#1f2328>models</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Namespaced</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#cf222e>bool</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>nf</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>ok</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>rule</span><span style=color:#1f2328>.(</span><span style=color:#1f2328>models</span><span style=color:#1f2328>.</span><span style=color:#1f2328>NamespacedWithFullpath</span><span style=color:#1f2328>)</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>if</span><span style=color:#fff> </span><span style=color:#1f2328>!</span><span style=color:#1f2328>ok</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>return</span><span style=color:#fff> </span><span style=color:#cf222e>false</span><span style=color:#fff>  </span><span style=color:#57606a>// no fullpath data, must fall back to DB</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>fullpath</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>nf</span><span style=color:#1f2328>.</span><span style=color:#6639ba>GetFullpathUIDs</span><span style=color:#1f2328>()</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>if</span><span style=color:#fff> </span><span style=color:#1f2328>fullpath</span><span style=color:#fff> </span><span style=color:#0550ae>==</span><span style=color:#fff> </span><span style=color:#0a3069>&#34;&#34;</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>return</span><span style=color:#fff> </span><span style=color:#cf222e>false</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#57606a>// Validate permissions against target folder and all parent folders</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#57606a>// using pre-computed UIDs — no database call needed</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#57606a>// Returns true only if user has required permissions for all ancestors</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>return</span><span style=color:#fff> </span><span style=color:#6639ba>evaluateLocalPermissions</span><span style=color:#1f2328>(</span><span style=color:#1f2328>user</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>fullpath</span><span style=color:#1f2328>)</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>Updated permission check with fast path:</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#1f2328>s</span><span style=color:#fff> </span><span style=color:#0550ae>*</span><span style=color:#1f2328>RuleService</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#6639ba>HasAccessInFolder</span><span style=color:#1f2328>(</span><span style=color:#1f2328>ctx</span><span style=color:#fff> </span><span style=color:#1f2328>context</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Context</span><span style=color:#1f2328>,</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>user</span><span style=color:#fff> </span><span style=color:#1f2328>identity</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Requester</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>rule</span><span style=color:#fff> </span><span style=color:#1f2328>models</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Namespaced</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#1f2328>(</span><span style=color:#cf222e>bool</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#cf222e>error</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#57606a>// Fast path: check in-memory using fullpath UIDs</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>if</span><span style=color:#fff> </span><span style=color:#6639ba>checkFolderAccessByFullpath</span><span style=color:#1f2328>(</span><span style=color:#1f2328>user</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>rule</span><span style=color:#1f2328>)</span><span style=color:#fff> </span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#cf222e>return</span><span style=color:#fff> </span><span style=color:#cf222e>true</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#cf222e>nil</span><span style=color:#fff>  </span><span style=color:#57606a>// skip database entirely</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#57606a>// Slow path: fall back to database-backed scope resolver</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#cf222e>return</span><span style=color:#fff> </span><span style=color:#1f2328>s</span><span style=color:#1f2328>.</span><span style=color:#1f2328>accessControl</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Evaluate</span><span style=color:#1f2328>(</span><span style=color:#1f2328>ctx</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>user</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>accesscontrol</span><span style=color:#1f2328>.</span><span style=color:#6639ba>EvalAll</span><span style=color:#1f2328>(</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>        </span><span style=color:#1f2328>accesscontrol</span><span style=color:#1f2328>.</span><span style=color:#6639ba>EvalPermission</span><span style=color:#1f2328>(</span><span style=color:#1f2328>ruleRead</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>folderScope</span><span style=color:#1f2328>),</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>))</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>}</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>Database query updated to include fullpath UIDs:</strong></p><div class=highlight><div style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#57606a>// Queries now request fullpath data to enable the fast path</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>folders</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>err</span><span style=color:#fff> </span><span style=color:#0550ae>:=</span><span style=color:#fff> </span><span style=color:#1f2328>s</span><span style=color:#1f2328>.</span><span style=color:#1f2328>folderService</span><span style=color:#1f2328>.</span><span style=color:#6639ba>GetFolders</span><span style=color:#1f2328>(</span><span style=color:#1f2328>ctx</span><span style=color:#1f2328>,</span><span style=color:#fff> </span><span style=color:#1f2328>folder</span><span style=color:#1f2328>.</span><span style=color:#1f2328>GetFoldersQuery</span><span style=color:#1f2328>{</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>WithFullpathUIDs</span><span style=color:#1f2328>:</span><span style=color:#fff> </span><span style=color:#cf222e>true</span><span style=color:#1f2328>,</span><span style=color:#fff>  </span><span style=color:#57606a>// new field</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#fff>    </span><span style=color:#1f2328>OrgID</span><span style=color:#1f2328>:</span><span style=color:#fff>            </span><span style=color:#1f2328>orgID</span><span style=color:#1f2328>,</span><span style=color:#fff>
</span></span></span><span style=display:flex><span><span style=color:#1f2328>})</span><span style=color:#fff>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=impact>Impact</h3><p>Eliminates database calls for the common case where folder hierarchy data is pre-computed, significantly reducing latency in alerting rule evaluation loops. Reviewer Yuri Tseretian commented: &ldquo;This is a great improvement.&rdquo;</p><p>Comprehensive test coverage was added for: permissions on target/parent folders, deeply nested hierarchies, mixed permission scenarios, and fallback behavior when fullpath UIDs are unavailable.</p><hr><h2 id=summary-table>Summary Table</h2><table><thead><tr><th>#</th><th>Repository</th><th>PR</th><th>Title</th><th>Stars</th><th>Merged</th><th>Key Improvement</th></tr></thead><tbody><tr><td>1</td><td>prometheus/prometheus</td><td><a href=https://github.com/prometheus/prometheus/pull/18069>#18069</a></td><td>tsdb: Optimize LabelValues API performance</td><td>55k+</td><td>Feb 16, 2026</td><td>99.91% faster (O(N)→O(log N)) via <code>Seek()</code></td></tr><tr><td>2</td><td>grafana/grafana</td><td><a href=https://github.com/grafana/grafana/pull/117475>#117475</a></td><td>Library Panels: folder tree cache for getAllHandler</td><td>65k+</td><td>Feb 10, 2026</td><td>52s → 0.4s via O(1) <code>FolderTree</code> cache</td></tr><tr><td>3</td><td>grafana/grafana</td><td><a href=https://github.com/grafana/grafana/pull/117080>#117080</a></td><td>Alerting: Improve performance of folder access checks</td><td>65k+</td><td>Feb 9, 2026</td><td>Eliminates DB calls via in-memory fullpath evaluation</td></tr></tbody></table><hr><p><em>Report generated: 2026-02-18</em></p></div><footer class=post-footer><div class=post-nav><a href=https://yushuanhsieh.github.io/posts/2024-03-09-golang_routing/ class="post-nav-link prev"><span class=label>← Previous</span>
<span class=title>從 Golang 1.22 routing enhancement 看專案開發</span>
</a><a href=https://yushuanhsieh.github.io/posts/2026-02-19-new-years/ class="post-nav-link next"><span class=label>Next →</span>
<span class=title>2026 New Year</span></a></div></footer></article></main><footer class=site-footer><div class=footer-inner><p class=footer-copyright>&copy; 2026 Cherie's Tech Blog. All rights reserved.</p><p class=footer-powered>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a></p></div></footer></body></html>